import{j as M,w as $,x as Qe,D as ye,g as B,y as Be}from"./app-DDtnOlzu.js";import{c as te,d as re,b as Je,a as et,_ as tt}from"./tslib.es6-DOJN6KQt.js";function rt(){return M.jsx("button",{className:"btn btn-primary mt-8",type:"submit",children:"저장하기"})}function nt(t){const{children:n,id:i,label:e,...r}=t;return M.jsxs(M.Fragment,{children:[M.jsx("label",{className:"label mt-2",htmlFor:i,children:e}),M.jsx("input",{id:i,...r}),n]})}function ve(t,n){return typeof t=="function"?t(n):t}function J(t,n){return Ce(n).reduce((e,r)=>{if(e===null)return null;if(typeof e<"u")return e[r]},t)}function oe(t,n,i){const e=Ce(n);function r(s){if(!e.length)return ve(i,s);const a=e.shift();if(typeof a=="string"||typeof a=="number"&&!Array.isArray(s))return typeof s=="object"?(s===null&&(s={}),{...s,[a]:r(s[a])}):{[a]:r()};if(Array.isArray(s)&&typeof a=="number"){const o=s.slice(0,a);return[...o.length?o:new Array(a),r(s[a]),...s.slice(a+1)]}return[...new Array(a),r()]}return r(t)}function it(t,n){const i=Ce(n);function e(r){if(!r)return;if(i.length===1){const a=i[0];if(Array.isArray(r)&&typeof a=="number")return r.filter((l,h)=>h!==a);const{[a]:o,...d}=r;return d}const s=i.shift();if(typeof s=="string"&&typeof r=="object")return{...r,[s]:e(r[s])};if(typeof s=="number"&&Array.isArray(r)){if(s>=r.length)return r;const a=r.slice(0,s);return[...a.length?a:new Array(s),e(r[s]),...r.slice(s+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return e(t)}const st=/^(\d+)$/gm,at=/\.(\d+)(?=\.)/gm,ot=/^(\d+)\./gm,lt=/\.(\d+$)/gm,ut=/\.{2,}/gm,Me="__int__",le=`${Me}$1`;function Ce(t){if(Array.isArray(t))return[...t];if(typeof t!="string")throw new Error("Path must be a string.");return t.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(st,le).replace(at,`.${le}.`).replace(ot,`${le}.`).replace(lt,`.${le}`).replace(ut,".").split(".").map(n=>n.indexOf(Me)===0?parseInt(n.substring(Me.length),10):n)}function ct(t){return!(Array.isArray(t)&&t.length===0)}function Se(t,n){const{asyncDebounceMs:i}=n,{onChangeAsync:e,onBlurAsync:r,onSubmitAsync:s,onBlurAsyncDebounceMs:a,onChangeAsyncDebounceMs:o}=n.validators||{},d=i??0,l={cause:"change",validate:e,debounceMs:o??d},h={cause:"blur",validate:r,debounceMs:a??d},u={cause:"submit",validate:s,debounceMs:0},c=m=>({...m,debounceMs:0});switch(t){case"submit":return[c(l),c(h),u];case"blur":return[h];case"change":return[l];case"server":default:return[]}}function Ee(t,n){const{onChange:i,onBlur:e,onSubmit:r,onMount:s}=n.validators||{},a={cause:"change",validate:i},o={cause:"blur",validate:e},d={cause:"submit",validate:r},l={cause:"mount",validate:s},h={cause:"server",validate:()=>{}};switch(t){case"mount":return[l];case"submit":return[a,o,d,h];case"server":return[h];case"blur":return[o,h];case"change":default:return[a,h]}}const we=t=>!!t&&typeof t=="object"&&"fields"in t;function z(t,n){if(Object.is(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(const[r,s]of t)if(!n.has(r)||!Object.is(s,n.get(r)))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(const r of t)if(!n.has(r))return!1;return!0}const i=Object.keys(t),e=Object.keys(n);if(i.length!==e.length)return!1;for(const r of i)if(!e.includes(r)||!z(t[r],n[r]))return!1;return!0}const Ne=({newFormValidatorError:t,isPreviousErrorFromFormValidator:n,previousErrorValue:i})=>t?{newErrorValue:t,newSource:"form"}:n?{newErrorValue:void 0,newSource:void 0}:i?{newErrorValue:i,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},Ze=({formLevelError:t,fieldLevelError:n})=>n?{newErrorValue:n,newSource:"field"}:t?{newErrorValue:t,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function dt(t){const n=new Map;for(const i of t){const e=[...i.path??[]].map(r=>{const s=typeof r=="object"?r.key:r;return typeof s=="number"?`[${s}]`:s}).join(".").replace(/\.\[/g,"[");n.set(e,(n.get(e)??[]).concat(i))}return Object.fromEntries(n)}const xe=t=>{const n=dt(t);return{form:n,fields:n}},q={validate({value:t,validationSource:n},i){const e=i["~standard"].validate(t);if(e instanceof Promise)throw new Error("async function passed to sync validator");if(e.issues)return n==="field"?e.issues:xe(e.issues)},async validateAsync({value:t,validationSource:n},i){const e=await i["~standard"].validate(t);if(e.issues)return n==="field"?e.issues:xe(e.issues)}},He=t=>!!t&&"~standard"in t,fe={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function ue(t){function n(u,c,m,f){const g=e(u,c,m,f);({insert:()=>o(g,u,c),remove:()=>d(g),swap:()=>f!==void 0&&h(g,u,c,f),move:()=>f!==void 0&&l(g,u,c,f)})[m]()}function i(u,c){return`${u}[${c}]`}function e(u,c,m,f){const g=[i(u,c)];if(m==="swap")g.push(i(u,f));else if(m==="move"){const[_,p]=[Math.min(c,f),Math.max(c,f)];for(let S=_;S<=p;S++)g.push(i(u,S))}else{const _=t.getFieldValue(u),p=Array.isArray(_)?_.length:0;for(let S=c+1;S<p;S++)g.push(i(u,S))}return Object.keys(t.fieldInfo).filter(_=>g.some(p=>_.startsWith(p)))}function r(u,c){return u.replace(/\[(\d+)\]/,(m,f)=>{const g=parseInt(f,10);return`[${c==="up"?g+1:Math.max(0,g-1)}]`})}function s(u,c){(c==="up"?u:[...u].reverse()).forEach(f=>{const g=r(f.toString(),c),_=t.getFieldMeta(g);_?t.setFieldMeta(f,_):t.setFieldMeta(f,a())})}const a=()=>fe,o=(u,c,m)=>{s(u,"down"),u.forEach(f=>{f.toString().startsWith(i(c,m))&&t.setFieldMeta(f,a())})},d=u=>{s(u,"up")},l=(u,c,m,f)=>{const g=new Map(Object.keys(t.fieldInfo).filter(_=>_.startsWith(i(c,m))).map(_=>[_,t.getFieldMeta(_)]));s(u,m<f?"up":"down"),Object.keys(t.fieldInfo).filter(_=>_.startsWith(i(c,f))).forEach(_=>{const p=_.replace(i(c,f),i(c,m)),S=g.get(p);S&&t.setFieldMeta(_,S)})},h=(u,c,m,f)=>{u.forEach(g=>{if(!g.toString().startsWith(i(c,m)))return;const _=g.toString().replace(i(c,m),i(c,f)),[p,S]=[t.getFieldMeta(g),t.getFieldMeta(_)];p&&t.setFieldMeta(_,p),S&&t.setFieldMeta(g,S)})};return{handleArrayFieldMetaShift:n}}function _e(t){return{values:t.values??{},errorMap:t.errorMap??{},fieldMetaBase:t.fieldMetaBase??{},isSubmitted:t.isSubmitted??!1,isSubmitting:t.isSubmitting??!1,isValidating:t.isValidating??!1,submissionAttempts:t.submissionAttempts??0,isSubmitSuccessful:t.isSubmitSuccessful??!1,validationMetaMap:t.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}}}class ht{constructor(n){var i;this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{var e,r;const s=this.fieldMetaDerived.mount(),a=this.store.mount(),o=()=>{s(),a()};(r=(e=this.options.listeners)==null?void 0:e.onMount)==null||r.call(e,{formApi:this});const{onMount:d}=this.options.validators||{};return d&&this.validateSync("mount"),o},this.update=e=>{var r,s;if(!e)return;const a=this.options;this.options=e;const o=!!((s=(r=e.transform)==null?void 0:r.deps)!=null&&s.some((h,u)=>h!==this.prevTransformArray[u])),d=e.defaultValues&&!z(e.defaultValues,a.defaultValues)&&!this.state.isTouched,l=!z(e.defaultState,a.defaultState)&&!this.state.isTouched;!d&&!l&&!o||$(()=>{this.baseStore.setState(()=>_e(Object.assign({},this.state,l?e.defaultState:{},d?{values:e.defaultValues}:{},o?{_force_re_eval:!this.state._force_re_eval}:{})))})},this.reset=(e,r)=>{const{fieldMeta:s}=this.state,a=this.resetFieldMeta(s);e&&!(r!=null&&r.keepDefaultValues)&&(this.options={...this.options,defaultValues:e}),this.baseStore.setState(()=>{var o;return _e({...this.options.defaultState,values:e??this.options.defaultValues??((o=this.options.defaultState)==null?void 0:o.values),fieldMetaBase:a})})},this.validateAllFields=async e=>{const r=[];return $(()=>{Object.values(this.fieldInfo).forEach(a=>{if(!a.instance)return;const o=a.instance;r.push(Promise.resolve().then(()=>o.validate(e,{skipFormValidation:!0}))),a.instance.state.meta.isTouched||a.instance.setMeta(d=>({...d,isTouched:!0}))})}),(await Promise.all(r)).flat()},this.validateArrayFieldsStartingFrom=async(e,r,s)=>{const a=this.getFieldValue(e),o=Array.isArray(a)?Math.max(a.length-1,0):null,d=[`${e}[${r}]`];for(let c=r+1;c<=(o??0);c++)d.push(`${e}[${c}]`);const l=Object.keys(this.fieldInfo).filter(c=>d.some(m=>c.startsWith(m))),h=[];return $(()=>{l.forEach(c=>{h.push(Promise.resolve().then(()=>this.validateField(c,s)))})}),(await Promise.all(h)).flat()},this.validateField=(e,r)=>{var s;const a=(s=this.fieldInfo[e])==null?void 0:s.instance;return a?(a.state.meta.isTouched||a.setMeta(o=>({...o,isTouched:!0})),a.validate(r)):[]},this.validateSync=e=>{const r=Ee(e,this.options);let s=!1;const a={};return $(()=>{var o,d;for(const h of r){if(!h.validate)continue;const u=this.runValidator({validate:h.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:c,fieldErrors:m}=he(u),f=ce(h.cause);for(const g of Object.keys(this.state.fieldMeta)){const _=this.getFieldMeta(g);if(!_)continue;const{errorMap:p,errorSourceMap:S}=_,F=m==null?void 0:m[g],{newErrorValue:V,newSource:D}=Ne({newFormValidatorError:F,isPreviousErrorFromFormValidator:(S==null?void 0:S[f])==="form",previousErrorValue:p==null?void 0:p[f]});D==="form"&&(a[g]={...a[g],[f]:F}),(p==null?void 0:p[f])!==V&&this.setFieldMeta(g,N=>({...N,errorMap:{...N.errorMap,[f]:V},errorSourceMap:{...N.errorSourceMap,[f]:D}}))}((o=this.state.errorMap)==null?void 0:o[f])!==c&&this.baseStore.setState(g=>({...g,errorMap:{...g.errorMap,[f]:c}})),(c||m)&&(s=!0)}const l=ce("submit");(d=this.state.errorMap)!=null&&d[l]&&e!=="submit"&&!s&&this.baseStore.setState(h=>({...h,errorMap:{...h.errorMap,[l]:void 0}}))}),{hasErrored:s,fieldsErrorMap:a}},this.validateAsync=async e=>{const r=Se(e,this.options);this.state.isFormValidating||this.baseStore.setState(l=>({...l,isFormValidating:!0}));const s=[];let a;for(const l of r){if(!l.validate)continue;const h=ce(l.cause),u=this.state.validationMetaMap[h];u==null||u.lastAbortController.abort();const c=new AbortController;this.state.validationMetaMap[h]={lastAbortController:c},s.push(new Promise(async m=>{let f;try{f=await new Promise((S,F)=>{setTimeout(async()=>{if(c.signal.aborted)return S(void 0);try{S(await this.runValidator({validate:l.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:c.signal},type:"validateAsync"}))}catch(V){F(V)}},l.debounceMs)})}catch(S){f=S}const{formError:g,fieldErrors:_}=he(f);_&&(a=a?{...a,..._}:_);const p=ce(l.cause);for(const S of Object.keys(this.state.fieldMeta)){const F=this.getFieldMeta(S);if(!F)continue;const{errorMap:V,errorSourceMap:D}=F,N=a==null?void 0:a[S],{newErrorValue:x,newSource:H}=Ne({newFormValidatorError:N,isPreviousErrorFromFormValidator:(D==null?void 0:D[p])==="form",previousErrorValue:V==null?void 0:V[p]});(V==null?void 0:V[p])!==x&&this.setFieldMeta(S,I=>({...I,errorMap:{...I.errorMap,[p]:x},errorSourceMap:{...I.errorSourceMap,[p]:H}}))}this.baseStore.setState(S=>({...S,errorMap:{...S.errorMap,[p]:g}})),m(a?{fieldErrors:a,errorMapKey:p}:void 0)}))}let o=[];const d={};if(s.length){o=await Promise.all(s);for(const l of o)if(l!=null&&l.fieldErrors){const{errorMapKey:h}=l;for(const[u,c]of Object.entries(l.fieldErrors)){const f={...d[u]||{},[h]:c};d[u]=f}}}return this.baseStore.setState(l=>({...l,isFormValidating:!1})),d},this.validate=e=>{const{hasErrored:r,fieldsErrorMap:s}=this.validateSync(e);return r&&!this.options.asyncAlways?s:this.validateAsync(e)},this.getFieldValue=e=>J(this.state.values,e),this.getFieldMeta=e=>this.state.fieldMeta[e],this.getFieldInfo=e=>{var r;return(r=this.fieldInfo)[e]||(r[e]={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}})},this.setFieldMeta=(e,r)=>{this.baseStore.setState(s=>({...s,fieldMetaBase:{...s.fieldMetaBase,[e]:ve(r,s.fieldMetaBase[e])}}))},this.resetFieldMeta=e=>Object.keys(e).reduce((r,s)=>{const a=s;return r[a]=fe,r},{}),this.setFieldValue=(e,r,s)=>{const a=(s==null?void 0:s.dontUpdateMeta)??!1;$(()=>{a||this.setFieldMeta(e,o=>({...o,isTouched:!0,isDirty:!0,errorMap:{...o==null?void 0:o.errorMap,onMount:void 0}})),this.baseStore.setState(o=>({...o,values:oe(o.values,e,r)}))})},this.deleteField=e=>{const s=[...Object.keys(this.fieldInfo).filter(a=>{const o=e.toString();return a!==o&&a.startsWith(o)}),e];this.baseStore.setState(a=>{const o={...a};return s.forEach(d=>{o.values=it(o.values,d),delete this.fieldInfo[d],delete o.fieldMetaBase[d]}),o})},this.pushFieldValue=(e,r,s)=>{this.setFieldValue(e,a=>[...Array.isArray(a)?a:[],r],s),this.validateField(e,"change")},this.insertFieldValue=async(e,r,s,a)=>{this.setFieldValue(e,o=>[...o.slice(0,r),s,...o.slice(r)],a),await this.validateField(e,"change"),ue(this).handleArrayFieldMetaShift(e,r,"insert"),await this.validateArrayFieldsStartingFrom(e,r,"change")},this.replaceFieldValue=async(e,r,s,a)=>{this.setFieldValue(e,o=>o.map((d,l)=>l===r?s:d),a),await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,r,"change")},this.removeFieldValue=async(e,r,s)=>{const a=this.getFieldValue(e),o=Array.isArray(a)?Math.max(a.length-1,0):null;if(this.setFieldValue(e,d=>d.filter((l,h)=>h!==r),s),ue(this).handleArrayFieldMetaShift(e,r,"remove"),o!==null){const d=`${e}[${o}]`;this.deleteField(d)}await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,r,"change")},this.swapFieldValues=(e,r,s,a)=>{this.setFieldValue(e,o=>{const d=o[r],l=o[s];return oe(oe(o,`${r}`,l),`${s}`,d)},a),ue(this).handleArrayFieldMetaShift(e,r,"swap",s),this.validateField(e,"change"),this.validateField(`${e}[${r}]`,"change"),this.validateField(`${e}[${s}]`,"change")},this.moveFieldValues=(e,r,s,a)=>{this.setFieldValue(e,o=>{const d=[...o];return d.splice(s,0,d.splice(r,1)[0]),d},a),ue(this).handleArrayFieldMetaShift(e,r,"move",s),this.validateField(e,"change"),this.validateField(`${e}[${r}]`,"change"),this.validateField(`${e}[${s}]`,"change")},this.clearFieldValues=(e,r)=>{const s=this.getFieldValue(e),a=Array.isArray(s)?Math.max(s.length-1,0):null;if(this.setFieldValue(e,[],r),a!==null)for(let o=0;o<=a;o++){const d=`${e}[${o}]`;this.deleteField(d)}this.validateField(e,"change")},this.resetField=e=>{this.baseStore.setState(r=>({...r,fieldMetaBase:{...r.fieldMetaBase,[e]:fe},values:this.options.defaultValues?oe(r.values,e,J(this.options.defaultValues,e)):r.values}))},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((e,[r,s])=>(Object.keys(s).length&&s.errors.length&&(e[r]={errors:s.errors,errorMap:s.errorMap}),e),{})}),this.parseValuesWithSchema=e=>q.validate({value:this.state.values,validationSource:"form"},e),this.parseValuesWithSchemaAsync=e=>q.validateAsync({value:this.state.values,validationSource:"form"},e),this.baseStore=new Qe(_e({...n==null?void 0:n.defaultState,values:(n==null?void 0:n.defaultValues)??((i=n==null?void 0:n.defaultState)==null?void 0:i.values)})),this.fieldMetaDerived=new ye({deps:[this.baseStore],fn:({prevDepVals:e,currDepVals:r,prevVal:s})=>{var a,o,d;const l=s,h=e==null?void 0:e[0],u=r[0];let c=0;const m={};for(const f of Object.keys(u.fieldMetaBase)){const g=u.fieldMetaBase[f],_=h==null?void 0:h.fieldMetaBase[f],p=l==null?void 0:l[f],S=J(u.values,f);let F=p==null?void 0:p.errors;if(!_||g.errorMap!==_.errorMap){F=Object.values(g.errorMap??{}).filter(H=>H!==void 0);const x=(a=this.getFieldInfo(f))==null?void 0:a.instance;x&&!x.options.disableErrorFlat&&(F=F==null?void 0:F.flat(1))}const V=!ct(F??[]),D=!g.isDirty,N=z(S,J(this.options.defaultValues,f))||z(S,(d=(o=this.getFieldInfo(f))==null?void 0:o.instance)==null?void 0:d.options.defaultValue);if(p&&p.isPristine===D&&p.isValid===V&&p.isDefaultValue===N&&p.errors===F&&g===_){m[f]=p,c++;continue}m[f]={...g,errors:F,isPristine:D,isValid:V,isDefaultValue:N}}return Object.keys(u.fieldMetaBase).length&&l&&c===Object.keys(u.fieldMetaBase).length?l:m}}),this.store=new ye({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:e,currDepVals:r,prevVal:s})=>{var a,o,d,l;const h=s,u=e==null?void 0:e[0],c=r[0],m=r[1],f=Object.values(m).filter(Boolean),g=f.some(R=>R.isValidating),_=f.every(R=>R.isValid),p=f.some(R=>R.isTouched),S=f.some(R=>R.isBlurred),F=f.every(R=>R.isDefaultValue),V=p&&((a=c.errorMap)==null?void 0:a.onMount),D=f.some(R=>R.isDirty),N=!D,x=!!((o=c.errorMap)!=null&&o.onMount||f.some(R=>{var j;return(j=R==null?void 0:R.errorMap)==null?void 0:j.onMount})),H=!!g;let I=(h==null?void 0:h.errors)??[];(!u||c.errorMap!==u.errorMap)&&(I=Object.values(c.errorMap).reduce((R,j)=>j===void 0?R:j&&we(j)?(R.push(j.form),R):(R.push(j),R),[]));const G=I.length===0,P=_&&G,Y=this.options.canSubmitWhenInvalid??!1,K=c.submissionAttempts===0&&!p&&!x||!H&&!c.isSubmitting&&P||Y;let U=c.errorMap;if(V&&(I=I.filter(R=>R!==c.errorMap.onMount),U=Object.assign(U,{onMount:void 0})),h&&u&&h.errorMap===U&&h.fieldMeta===this.fieldMetaDerived.state&&h.errors===I&&h.isFieldsValidating===g&&h.isFieldsValid===_&&h.isFormValid===G&&h.isValid===P&&h.canSubmit===K&&h.isTouched===p&&h.isBlurred===S&&h.isPristine===N&&h.isDefaultValue===F&&h.isDirty===D&&z(u,c))return h;let X={...c,errorMap:U,fieldMeta:this.fieldMetaDerived.state,errors:I,isFieldsValidating:g,isFieldsValid:_,isFormValid:G,isValid:P,canSubmit:K,isTouched:p,isBlurred:S,isPristine:N,isDefaultValue:F,isDirty:D};const Q=((d=this.options.transform)==null?void 0:d.deps)??[];if(Q.length!==this.prevTransformArray.length||Q.some((R,j)=>R!==this.prevTransformArray[j])){const R=Object.assign({},this,{state:X});(l=this.options.transform)==null||l.fn(R),X=R.state,this.prevTransformArray=Q}return X}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(n||{})}get state(){return this.store.state}runValidator(n){return He(n.validate)?q[n.type](n.value,n.validate):n.validate(n.value)}async handleSubmit(n){var i,e,r,s,a,o,d,l;if(this.baseStore.setState(u=>({...u,isSubmitted:!1,submissionAttempts:u.submissionAttempts+1,isSubmitSuccessful:!1})),$(()=>{Object.values(this.fieldInfo).forEach(u=>{u.instance&&(u.instance.state.meta.isTouched||u.instance.setMeta(c=>({...c,isTouched:!0})))})}),!this.state.canSubmit)return;this.baseStore.setState(u=>({...u,isSubmitting:!0}));const h=()=>{this.baseStore.setState(u=>({...u,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){h(),(e=(i=this.options).onSubmitInvalid)==null||e.call(i,{value:this.state.values,formApi:this});return}if(await this.validate("submit"),!this.state.isValid){h(),(s=(r=this.options).onSubmitInvalid)==null||s.call(r,{value:this.state.values,formApi:this});return}$(()=>{Object.values(this.fieldInfo).forEach(u=>{var c,m,f;(f=(m=(c=u.instance)==null?void 0:c.options.listeners)==null?void 0:m.onSubmit)==null||f.call(m,{value:u.instance.state.value,fieldApi:u.instance})})}),(o=(a=this.options.listeners)==null?void 0:a.onSubmit)==null||o.call(a,{formApi:this});try{await((l=(d=this.options).onSubmit)==null?void 0:l.call(d,{value:this.state.values,formApi:this,meta:n??this.options.onSubmitMeta})),$(()=>{this.baseStore.setState(u=>({...u,isSubmitted:!0,isSubmitSuccessful:!0})),h()})}catch(u){throw this.baseStore.setState(c=>({...c,isSubmitSuccessful:!1})),h(),u}}setErrorMap(n){$(()=>{Object.entries(n).forEach(([i,e])=>{const r=i;if(we(e)){const{formError:s,fieldErrors:a}=he(e);for(const o of Object.keys(this.fieldInfo))this.getFieldMeta(o)&&this.setFieldMeta(o,l=>({...l,errorMap:{...l.errorMap,[r]:a==null?void 0:a[o]},errorSourceMap:{...l.errorSourceMap,[r]:"form"}}));this.baseStore.setState(o=>({...o,errorMap:{...o.errorMap,[r]:s}}))}else this.baseStore.setState(s=>({...s,errorMap:{...s.errorMap,[r]:e}}))})})}}function he(t){if(t){if(we(t)){const n=he(t.form).formError,i=t.fields;return{formError:n,fieldErrors:i}}return{formError:t}}return{formError:void 0}}function ce(t){switch(t){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}class ft{constructor(n){this.options={},this.mount=()=>{var i,e;const r=this.store.mount();this.options.defaultValue!==void 0&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0});const s=this.getInfo();s.instance=this,this.update(this.options);const{onMount:a}=this.options.validators||{};if(a){const o=this.runValidator({validate:a,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});o&&this.setMeta(d=>({...d,errorMap:{...d==null?void 0:d.errorMap,onMount:o},errorSourceMap:{...d==null?void 0:d.errorSourceMap,onMount:"field"}}))}return(e=(i=this.options.listeners)==null?void 0:i.onMount)==null||e.call(i,{value:this.state.value,fieldApi:this}),r},this.update=i=>{this.options=i;const e=this.name!==i.name;if(this.name=i.name,this.state.value===void 0){const r=J(i.form.options.defaultValues,i.name),s=i.defaultValue??r;e?this.setValue(a=>a||s,{dontUpdateMeta:!0}):s!==void 0&&this.setValue(s,{dontUpdateMeta:!0})}this.form.getFieldMeta(this.name)===void 0&&this.setMeta(this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(i,e)=>{this.form.setFieldValue(this.name,i,e),this.triggerOnChangeListener(),this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=i=>this.form.setFieldMeta(this.name,i),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(i,e)=>{this.form.pushFieldValue(this.name,i,e),this.triggerOnChangeListener()},this.insertValue=(i,e,r)=>{this.form.insertFieldValue(this.name,i,e,r),this.triggerOnChangeListener()},this.replaceValue=(i,e,r)=>{this.form.replaceFieldValue(this.name,i,e,r),this.triggerOnChangeListener()},this.removeValue=(i,e)=>{this.form.removeFieldValue(this.name,i,e),this.triggerOnChangeListener()},this.swapValues=(i,e,r)=>{this.form.swapFieldValues(this.name,i,e,r),this.triggerOnChangeListener()},this.moveValue=(i,e,r)=>{this.form.moveFieldValues(this.name,i,e,r),this.triggerOnChangeListener()},this.clearValues=i=>{this.form.clearFieldValues(this.name,i),this.triggerOnChangeListener()},this.getLinkedFields=i=>{const e=Object.values(this.form.fieldInfo),r=[];for(const s of e){if(!s.instance)continue;const{onChangeListenTo:a,onBlurListenTo:o}=s.instance.options.validators||{};i==="change"&&(a!=null&&a.includes(this.name))&&r.push(s.instance),i==="blur"&&(o!=null&&o.includes(this.name))&&r.push(s.instance)}return r},this.validateSync=(i,e)=>{var r;const s=Ee(i,this.options),o=this.getLinkedFields(i).reduce((h,u)=>{const c=Ee(i,u.options);return c.forEach(m=>{m.field=u}),h.concat(c)},[]);let d=!1;$(()=>{const h=(u,c)=>{var m;const f=de(c.cause),g=c.validate?Pe(u.runValidator({validate:c.validate,value:{value:u.store.state.value,validationSource:"field",fieldApi:u},type:"validate"})):void 0,_=e[f],{newErrorValue:p,newSource:S}=Ze({formLevelError:_,fieldLevelError:g});((m=u.state.meta.errorMap)==null?void 0:m[f])!==p&&u.setMeta(F=>({...F,errorMap:{...F.errorMap,[f]:p},errorSourceMap:{...F.errorSourceMap,[f]:S}})),p&&(d=!0)};for(const u of s)h(this,u);for(const u of o)u.validate&&h(u.field,u)});const l=de("submit");return(r=this.state.meta.errorMap)!=null&&r[l]&&i!=="submit"&&!d&&this.setMeta(h=>({...h,errorMap:{...h.errorMap,[l]:void 0},errorSourceMap:{...h.errorSourceMap,[l]:void 0}})),{hasErrored:d}},this.validateAsync=async(i,e)=>{const r=Se(i,this.options),s=await e,a=this.getLinkedFields(i),o=a.reduce((c,m)=>{const f=Se(i,m.options);return f.forEach(g=>{g.field=m}),c.concat(f)},[]);this.state.meta.isValidating||this.setMeta(c=>({...c,isValidating:!0}));for(const c of a)c.setMeta(m=>({...m,isValidating:!0}));const d=[],l=[],h=(c,m,f)=>{const g=de(m.cause),_=c.getInfo().validationMetaMap[g];_==null||_.lastAbortController.abort();const p=new AbortController;this.getInfo().validationMetaMap[g]={lastAbortController:p},f.push(new Promise(async S=>{var F;let V;try{V=await new Promise((I,G)=>{this.timeoutIds.validations[m.cause]&&clearTimeout(this.timeoutIds.validations[m.cause]),this.timeoutIds.validations[m.cause]=setTimeout(async()=>{if(p.signal.aborted)return I(void 0);try{I(await this.runValidator({validate:m.validate,value:{value:c.store.state.value,fieldApi:c,signal:p.signal,validationSource:"field"},type:"validateAsync"}))}catch(P){G(P)}},m.debounceMs)})}catch(I){V=I}if(p.signal.aborted)return S(void 0);const D=Pe(V),N=(F=s[this.name])==null?void 0:F[g],{newErrorValue:x,newSource:H}=Ze({formLevelError:N,fieldLevelError:D});c.setMeta(I=>({...I,errorMap:{...I==null?void 0:I.errorMap,[g]:x},errorSourceMap:{...I.errorSourceMap,[g]:H}})),S(x)}))};for(const c of r)c.validate&&h(this,c,d);for(const c of o)c.validate&&h(c.field,c,l);let u=[];(d.length||l.length)&&(u=await Promise.all(d),await Promise.all(l)),this.setMeta(c=>({...c,isValidating:!1}));for(const c of a)c.setMeta(m=>({...m,isValidating:!1}));return u.filter(Boolean)},this.validate=(i,e)=>{var r;if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:s}=e!=null&&e.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(i),{hasErrored:a}=this.validateSync(i,s[this.name]??{});if(a&&!this.options.asyncAlways)return(r=this.getInfo().validationMetaMap[de(i)])==null||r.lastAbortController.abort(),this.state.meta.errors;const o=e!=null&&e.skipFormValidation?Promise.resolve({}):this.form.validateAsync(i);return this.validateAsync(i,o)},this.handleChange=i=>{this.setValue(i)},this.handleBlur=()=>{this.state.meta.isTouched||(this.setMeta(e=>({...e,isTouched:!0})),this.validate("change")),this.state.meta.isBlurred||this.setMeta(e=>({...e,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.parseValueWithSchema=i=>q.validate({value:this.state.value,validationSource:"field"},i),this.parseValueWithSchemaAsync=i=>q.validateAsync({value:this.state.value,validationSource:"field"},i),this.form=n.form,this.name=n.name,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new ye({deps:[this.form.store],fn:()=>{const i=this.form.getFieldValue(this.name),e=this.form.getFieldMeta(this.name)??{...fe,...n.defaultMeta};return{value:i,meta:e}}}),this.options=n}get state(){return this.store.state}runValidator(n){return He(n.validate)?q[n.type](n.value,n.validate):n.validate(n.value)}setErrorMap(n){this.setMeta(i=>({...i,errorMap:{...i.errorMap,...n}}))}triggerOnBlurListener(){var n,i,e,r,s,a;const o=(n=this.form.options.listeners)==null?void 0:n.onBlurDebounceMs;o&&o>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{var l,h;(h=(l=this.form.options.listeners)==null?void 0:l.onBlur)==null||h.call(l,{formApi:this.form,fieldApi:this})},o)):(e=(i=this.form.options.listeners)==null?void 0:i.onBlur)==null||e.call(i,{formApi:this.form,fieldApi:this});const d=(r=this.options.listeners)==null?void 0:r.onBlurDebounceMs;d&&d>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{var l,h;(h=(l=this.options.listeners)==null?void 0:l.onBlur)==null||h.call(l,{value:this.state.value,fieldApi:this})},d)):(a=(s=this.options.listeners)==null?void 0:s.onBlur)==null||a.call(s,{value:this.state.value,fieldApi:this})}triggerOnChangeListener(){var n,i,e,r,s,a;const o=(n=this.form.options.listeners)==null?void 0:n.onChangeDebounceMs;o&&o>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{var l,h;(h=(l=this.form.options.listeners)==null?void 0:l.onChange)==null||h.call(l,{formApi:this.form,fieldApi:this})},o)):(e=(i=this.form.options.listeners)==null?void 0:i.onChange)==null||e.call(i,{formApi:this.form,fieldApi:this});const d=(r=this.options.listeners)==null?void 0:r.onChangeDebounceMs;d&&d>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{var l,h;(h=(l=this.options.listeners)==null?void 0:l.onChange)==null||h.call(l,{value:this.state.value,fieldApi:this})},d)):(a=(s=this.options.listeners)==null?void 0:s.onChange)==null||a.call(s,{value:this.state.value,fieldApi:this})}}function Pe(t){if(t)return t}function de(t){switch(t){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}const me=typeof window<"u"?B.useLayoutEffect:B.useEffect;function mt(t){const[n]=B.useState(()=>{const e=new ft({...t,form:t.form,name:t.name});return e.Field=$e,e});return me(n.mount,[n]),me(()=>{n.update(t)}),Be(n.store,t.mode==="array"?i=>[i.meta,Object.keys(i.value??[]).length]:void 0),n}const $e=({children:t,...n})=>{const i=mt(n),e=B.useMemo(()=>ve(t,i),[t,i,i.state.value,i.state.meta]);return M.jsx(M.Fragment,{children:e})};function vt({form:t,selector:n,children:i}){const e=Be(t.store,n);return ve(i,e)}function pt(t){const[n]=B.useState(()=>{const i=new ht(t),e=i;return e.Field=function(s){return M.jsx($e,{...s,form:i})},e.Subscribe=r=>M.jsx(vt,{form:i,selector:r.selector,children:r.children}),e});return me(n.mount,[]),Be(n.store,i=>i.isSubmitting),me(()=>{n.update(t)}),n}function gt(){const t=B.createContext(null);function n(){const r=B.useContext(t);if(!r)throw new Error("`fieldContext` only works when within a `fieldComponent` passed to `createFormHook`");return r}const i=B.createContext(null);function e(){const r=B.useContext(i);if(!r)throw new Error("`formContext` only works when within a `formComponent` passed to `createFormHook`");return r}return{fieldContext:t,useFieldContext:n,useFormContext:e,formContext:i}}function At({fieldComponents:t,fieldContext:n,formContext:i,formComponents:e}){function r(a){const o=pt(a),d=B.useMemo(()=>({children:u})=>M.jsx(i.Provider,{value:o,children:u}),[o]),l=B.useMemo(()=>({children:u,...c})=>M.jsx(o.Field,{...c,children:m=>M.jsx(n.Provider,{value:m,children:u(Object.assign(m,t))})}),[o]);return B.useMemo(()=>Object.assign(o,{AppField:l,AppForm:d,...e}),[o,l,d])}function s({render:a,props:o}){return d=>a({...o,...d})}return{useAppForm:r,withForm:s}}const{fieldContext:_t,formContext:bt}=gt(),{useAppForm:yt}=At({fieldComponents:{LabelInput:nt},formComponents:{FormSubmit:rt},fieldContext:_t,formContext:bt});function Mt(){return yt({defaultValues:{isbn:"9788962813609",title:"",author:"",pressName:"",releaseDate:"",price:"",own:"",read:""},onSubmit:({value:t})=>{alert(JSON.stringify(t,null,2))}})}var St=function(t,n){for(var i=[],e=2;e<arguments.length;e++)i[e-2]=arguments[e];return te(void 0,Je([t,n],i,!0),void 0,function(r,s,a){var o,d,l;return a===void 0&&(a="error"),re(this,function(h){switch(h.label){case 0:return l=new Promise(function(u,c){o=u,d=c,r.addEventListener(s,o),r.addEventListener(a,d)}).finally(function(){r.removeEventListener(s,o),r.removeEventListener(a,d)}),[4,l];case 1:return[2,h.sent()]}})})},Et=function(t){return te(void 0,void 0,void 0,function(){return re(this,function(n){switch(n.label){case 0:return[4,new Promise(function(i){return setTimeout(i,t)})];case 1:return n.sent(),[2]}})})};function wt(){var t=[];function n(i){setTimeout(function(){t.forEach(function(e){e(i)})})}return{set:n,subscriptions:t}}function Ft(t,n){var i=B.useState(n),e=i[0],r=i[1];return B.useEffect(function(){var s=t.subscriptions.push(r);return function(){t.subscriptions.splice(s,1)}},[t]),[e,t.set]}var Rt=wt();function Bt(){var t=Ft(Rt),n=t[0],i=t[1];return[n,i]}var Ct={width:{min:640,ideal:1280},height:{min:480,ideal:720},facingMode:{ideal:"environment"},advanced:[{width:1920,height:1280},{aspectRatio:1.333}]};function It(t,n){var i=this,e=B.useState(!1),r=e[0],s=e[1],a=B.useState(),o=a[0],d=a[1],l=Bt(),h=l[1];B.useEffect(function(){window.isSecureContext||d(new Error(`[react-barcode-scanner]: 
          Browser ask for secure origin (such as https) when use getUserMedia,
          reference: https://sites.google.com/a/chromium.org/dev/Home/chromium-security/deprecating-powerful-features-on-insecure-origins
        `))},[]);var u=B.useMemo(function(){var c=Object.assign({},Ct,n);return{audio:!1,video:c}},[n]);return B.useEffect(function(){var c=!1,m,f=function(){return te(i,void 0,void 0,function(){var _;return re(this,function(p){switch(p.label){case 0:return d(void 0),_=t.current,_==null?[2]:[4,navigator.mediaDevices.getUserMedia(u)];case 1:return m=p.sent(),_.mozSrcObject!==void 0?_.mozSrcObject=m:_.srcObject=m,[4,St(_,"loadeddata")];case 2:return p.sent(),[4,Et(500)];case 3:return p.sent(),s(!0),h(m),[2]}})})},g=function(){m==null||m.getTracks().forEach(function(_){_.stop()})};return f().then(function(){c&&g()}).catch(function(_){d(_)}),function(){c=!0,g()}},[t,u,h]),{isCameraReady:r,error:o}}var Vt={delay:1e3,formats:["qr_code"]};function Tt(t,n){var i=this,e=B.useState(),r=e[0],s=e[1],a=B.useState(!1),o=a[0],d=a[1],l=B.useMemo(function(){return Object.assign({},Vt,n)},[n]),h=B.useCallback(function(){return te(i,void 0,void 0,function(){var m,f,g;return re(this,function(_){switch(_.label){case 0:return m=t.current,f=new BarcodeDetector({formats:l.formats}),[4,f.detect(m)];case 1:return g=_.sent(),g!==void 0&&g.length>0&&s(g),[2]}})})},[t,l.formats]);B.useEffect(function(){var m=t.current;if(!(m==null||!o)){var f=!1,g,_=function(){return te(i,void 0,void 0,function(){return re(this,function(p){switch(p.label){case 0:return[4,h()];case 1:return p.sent(),f||(g=window.setTimeout(_,l.delay)),[2]}})})};return _(),function(){clearTimeout(g),f=!0}}},[o,t,l.delay,h]),B.useEffect(function(){l.formats.length===0&&d(!1)},[l.formats]);var u=B.useCallback(function(){d(!0)},[]),c=B.useCallback(function(){d(!1)},[]);return{detectedBarcodes:r,startScan:u,stopScan:c}}var Dt=function(t){var n=t.options,i=t.onCapture,e=t.trackConstraints,r=t.paused,s=r===void 0?!1:r,a=et(t,["options","onCapture","trackConstraints","paused"]),o=B.useRef(null),d=It(o,e).isCameraReady,l=Tt(o,n),h=l.detectedBarcodes,u=l.startScan,c=l.stopScan;return B.useEffect(function(){d&&!s?u():c()},[c,d,u,s]),B.useEffect(function(){h!==void 0&&(i==null||i(h))},[h,i]),B.useEffect(function(){var m=o.current;m&&(d&&!s?m.play().catch(console.error):m.pause())},[s,d]),M.jsx("video",tt({ref:o,style:{width:"100%",height:"100%",objectFit:"cover"},autoPlay:!0,muted:!0,playsInline:!0},a))},je;(function(t){t.CODE_128="code_128",t.CODE_39="code_39",t.CODE_93="code_93",t.CODABAR="codabar",t.EAN_13="ean_13",t.EAN_8="ean_8",t.ITF="itf",t.QR_CODE="qr_code",t.UPC_A="upc_a",t.UPC_E="upc_e"})(je||(je={}));function W(t,n,i,e){return new(i||(i=Promise))(function(r,s){function a(l){try{d(e.next(l))}catch(h){s(h)}}function o(l){try{d(e.throw(l))}catch(h){s(h)}}function d(l){var h;l.done?r(l.value):(h=l.value,h instanceof i?h:new i(function(u){u(h)})).then(a,o)}d((e=e.apply(t,[])).next())})}var be,Ot=(be=import.meta.url,async function(t={}){var n,i,e=t;e.ready=new Promise((v,A)=>{n=v,i=A});var r,s,a,o=Object.assign({},e),d=typeof window=="object",l=typeof importScripts=="function",h=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",u="";if(h){const{createRequire:v}=await Promise.resolve().then(()=>kt);var c=v(import.meta.url),m=c("fs"),f=c("path");u=l?f.dirname(u)+"/":c("url").fileURLToPath(new URL("/assets/index-BY-99T_0.mjs",import.meta.url)),r=(A,w)=>(A=R(A)?new URL(A):f.normalize(A),m.readFileSync(A,w?void 0:"utf8")),a=A=>{var w=r(A,!0);return w.buffer||(w=new Uint8Array(w)),w},s=(A,w,y,C=!0)=>{A=R(A)?new URL(A):f.normalize(A),m.readFile(A,C?void 0:"utf8",(O,T)=>{O?y(O):w(C?T.buffer:T)})},!e.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),e.inspect=()=>"[Emscripten Module object]"}else(d||l)&&(l?u=self.location.href:typeof document<"u"&&document.currentScript&&(u=document.currentScript.src),be&&(u=be),u=u.indexOf("blob:")!==0?u.substr(0,u.replace(/[?#].*/,"").lastIndexOf("/")+1):"",r=v=>{var A=new XMLHttpRequest;return A.open("GET",v,!1),A.send(null),A.responseText},l&&(a=v=>{var A=new XMLHttpRequest;return A.open("GET",v,!1),A.responseType="arraybuffer",A.send(null),new Uint8Array(A.response)}),s=(v,A,w)=>{var y=new XMLHttpRequest;y.open("GET",v,!0),y.responseType="arraybuffer",y.onload=()=>{y.status==200||y.status==0&&y.response?A(y.response):w()},y.onerror=w,y.send(null)});var g,_,p,S=e.print||console.log.bind(console),F=e.printErr||console.error.bind(console);Object.assign(e,o),o=null,e.arguments&&e.arguments,e.thisProgram&&e.thisProgram,e.quit&&e.quit,e.wasmBinary&&(g=e.wasmBinary),e.noExitRuntime,typeof WebAssembly!="object"&&K("no native wasm support detected");var V,D,N=!1;function x(){var v=_.buffer;e.HEAP8=new Int8Array(v),e.HEAP16=new Int16Array(v),e.HEAP32=new Int32Array(v),e.HEAPU8=V=new Uint8Array(v),e.HEAPU16=new Uint16Array(v),e.HEAPU32=D=new Uint32Array(v),e.HEAPF32=new Float32Array(v),e.HEAPF64=new Float64Array(v)}var H=[],I=[],G=[],P=0,Y=null;function K(v){e.onAbort&&e.onAbort(v),F(v="Aborted("+v+")"),N=!0,v+=". Build with -sASSERTIONS for more info.";var A=new WebAssembly.RuntimeError(v);throw i(A),A}var U,X,Q="data:application/octet-stream;base64,";function ge(v){return v.startsWith(Q)}function R(v){return v.startsWith("file://")}function j(v){if(v==U&&g)return new Uint8Array(g);if(a)return a(v);throw"both async and sync fetching of the wasm failed"}function Ve(v,A,w){return function(y){if(!g&&(d||l)){if(typeof fetch=="function"&&!R(y))return fetch(y,{credentials:"same-origin"}).then(C=>{if(!C.ok)throw"failed to load wasm binary file at '"+y+"'";return C.arrayBuffer()}).catch(()=>j(y));if(s)return new Promise((C,O)=>{s(y,T=>C(new Uint8Array(T)),O)})}return Promise.resolve().then(()=>j(y))}(v).then(y=>WebAssembly.instantiate(y,A)).then(y=>y).then(w,y=>{F("failed to asynchronously prepare wasm: "+y),K(y)})}e.locateFile?ge(U="zbar.wasm")||(X=U,U=e.locateFile?e.locateFile(X,u):u+X):U=new URL("/assets/zbar-BSn7mpZR.wasm",import.meta.url).href;var ie,Ae=v=>{for(;v.length>0;)v.shift()(e)},Xe=v=>{var A=v-_.buffer.byteLength+65535>>>16;try{return _.grow(A),x(),1}catch{}},Te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ze=[null,[],[]],qe=(v,A)=>{var w=ze[v];A===0||A===10?((v===1?S:F)(((y,C,O)=>{for(var T=C+O,Z=C;y[Z]&&!(Z>=T);)++Z;if(Z-C>16&&y.buffer&&Te)return Te.decode(y.subarray(C,Z));for(var k="";C<Z;){var L=y[C++];if(128&L){var se=63&y[C++];if((224&L)!=192){var ae=63&y[C++];if((L=(240&L)==224?(15&L)<<12|se<<6|ae:(7&L)<<18|se<<12|ae<<6|63&y[C++])<65536)k+=String.fromCharCode(L);else{var Oe=L-65536;k+=String.fromCharCode(55296|Oe>>10,56320|1023&Oe)}}else k+=String.fromCharCode((31&L)<<6|se)}else k+=String.fromCharCode(L)}return k})(w,0)),w.length=0):w.push(A)},Ke={d:()=>!0,e:function(){return Date.now()},c:v=>{var A=V.length,w=2147483648;if((v>>>=0)>w)return!1;for(var y,C,O=1;O<=4;O*=2){var T=A*(1+.2/O);T=Math.min(T,v+100663296);var Z=Math.min(w,(y=Math.max(v,T))+((C=65536)-y%C)%C);if(Xe(Z))return!0}return!1},f:v=>52,b:function(v,A,w,y,C){return 70},a:(v,A,w,y)=>{for(var C=0,O=0;O<w;O++){var T=D[A>>2],Z=D[A+4>>2];A+=8;for(var k=0;k<Z;k++)qe(v,V[T+k]);C+=Z}return D[y>>2]=C,0}};function De(){function v(){ie||(ie=!0,e.calledRun=!0,N||(Ae(I),n(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)A=e.postRun.shift(),G.unshift(A);var A;Ae(G)}()))}P>0||(function(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)A=e.preRun.shift(),H.unshift(A);var A;Ae(H)}(),P>0||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),v()},1)):v()))}if(function(){var v,A,w,y,C={a:Ke};function O(T,Z){var k,L=T.exports;return _=(p=L).g,x(),p.s,k=p.h,I.unshift(k),function(se){if(P--,e.monitorRunDependencies&&e.monitorRunDependencies(P),P==0&&Y){var ae=Y;Y=null,ae()}}(),L}if(P++,e.monitorRunDependencies&&e.monitorRunDependencies(P),e.instantiateWasm)try{return e.instantiateWasm(C,O)}catch(T){F("Module.instantiateWasm callback failed with error: "+T),i(T)}(v=g,A=U,w=C,y=function(T){O(T.instance)},v||typeof WebAssembly.instantiateStreaming!="function"||ge(A)||R(A)||h||typeof fetch!="function"?Ve(A,w,y):fetch(A,{credentials:"same-origin"}).then(T=>WebAssembly.instantiateStreaming(T,w).then(y,function(Z){return F("wasm streaming compile failed: "+Z),F("falling back to ArrayBuffer instantiation"),Ve(A,w,y)}))).catch(i)}(),e._ImageScanner_create=()=>(e._ImageScanner_create=p.i)(),e._ImageScanner_destory=v=>(e._ImageScanner_destory=p.j)(v),e._ImageScanner_set_config=(v,A,w,y)=>(e._ImageScanner_set_config=p.k)(v,A,w,y),e._ImageScanner_enable_cache=(v,A)=>(e._ImageScanner_enable_cache=p.l)(v,A),e._ImageScanner_recycle_image=(v,A)=>(e._ImageScanner_recycle_image=p.m)(v,A),e._ImageScanner_get_results=v=>(e._ImageScanner_get_results=p.n)(v),e._ImageScanner_scan=(v,A)=>(e._ImageScanner_scan=p.o)(v,A),e._Image_create=(v,A,w,y,C,O)=>(e._Image_create=p.p)(v,A,w,y,C,O),e._Image_destory=v=>(e._Image_destory=p.q)(v),e._Image_get_symbols=v=>(e._Image_get_symbols=p.r)(v),e._free=v=>(e._free=p.t)(v),e._malloc=v=>(e._malloc=p.u)(v),Y=function v(){ie||De(),ie||(Y=v)},e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return De(),t.ready});let Fe;function Nt(t={}){Fe=function(){return W(this,void 0,void 0,function*(){const n=yield Ot(t);if(n)return n;throw Error("WASM was not loaded")})}()}function Re(){return W(this,void 0,void 0,function*(){return Fe||Nt(),yield Fe})}var E,ne,Le;(function(t){t[t.ZBAR_NONE=0]="ZBAR_NONE",t[t.ZBAR_PARTIAL=1]="ZBAR_PARTIAL",t[t.ZBAR_EAN2=2]="ZBAR_EAN2",t[t.ZBAR_EAN5=5]="ZBAR_EAN5",t[t.ZBAR_EAN8=8]="ZBAR_EAN8",t[t.ZBAR_UPCE=9]="ZBAR_UPCE",t[t.ZBAR_ISBN10=10]="ZBAR_ISBN10",t[t.ZBAR_UPCA=12]="ZBAR_UPCA",t[t.ZBAR_EAN13=13]="ZBAR_EAN13",t[t.ZBAR_ISBN13=14]="ZBAR_ISBN13",t[t.ZBAR_COMPOSITE=15]="ZBAR_COMPOSITE",t[t.ZBAR_I25=25]="ZBAR_I25",t[t.ZBAR_DATABAR=34]="ZBAR_DATABAR",t[t.ZBAR_DATABAR_EXP=35]="ZBAR_DATABAR_EXP",t[t.ZBAR_CODABAR=38]="ZBAR_CODABAR",t[t.ZBAR_CODE39=39]="ZBAR_CODE39",t[t.ZBAR_PDF417=57]="ZBAR_PDF417",t[t.ZBAR_QRCODE=64]="ZBAR_QRCODE",t[t.ZBAR_SQCODE=80]="ZBAR_SQCODE",t[t.ZBAR_CODE93=93]="ZBAR_CODE93",t[t.ZBAR_CODE128=128]="ZBAR_CODE128",t[t.ZBAR_SYMBOL=255]="ZBAR_SYMBOL",t[t.ZBAR_ADDON2=512]="ZBAR_ADDON2",t[t.ZBAR_ADDON5=1280]="ZBAR_ADDON5",t[t.ZBAR_ADDON=1792]="ZBAR_ADDON"})(E||(E={})),function(t){t[t.ZBAR_CFG_ENABLE=0]="ZBAR_CFG_ENABLE",t[t.ZBAR_CFG_ADD_CHECK=1]="ZBAR_CFG_ADD_CHECK",t[t.ZBAR_CFG_EMIT_CHECK=2]="ZBAR_CFG_EMIT_CHECK",t[t.ZBAR_CFG_ASCII=3]="ZBAR_CFG_ASCII",t[t.ZBAR_CFG_BINARY=4]="ZBAR_CFG_BINARY",t[t.ZBAR_CFG_NUM=5]="ZBAR_CFG_NUM",t[t.ZBAR_CFG_MIN_LEN=32]="ZBAR_CFG_MIN_LEN",t[t.ZBAR_CFG_MAX_LEN=33]="ZBAR_CFG_MAX_LEN",t[t.ZBAR_CFG_UNCERTAINTY=64]="ZBAR_CFG_UNCERTAINTY",t[t.ZBAR_CFG_POSITION=128]="ZBAR_CFG_POSITION",t[t.ZBAR_CFG_TEST_INVERTED=129]="ZBAR_CFG_TEST_INVERTED",t[t.ZBAR_CFG_X_DENSITY=256]="ZBAR_CFG_X_DENSITY",t[t.ZBAR_CFG_Y_DENSITY=257]="ZBAR_CFG_Y_DENSITY"}(ne||(ne={})),function(t){t[t.ZBAR_ORIENT_UNKNOWN=-1]="ZBAR_ORIENT_UNKNOWN",t[t.ZBAR_ORIENT_UP=0]="ZBAR_ORIENT_UP",t[t.ZBAR_ORIENT_RIGHT=1]="ZBAR_ORIENT_RIGHT",t[t.ZBAR_ORIENT_DOWN=2]="ZBAR_ORIENT_DOWN",t[t.ZBAR_ORIENT_LEFT=3]="ZBAR_ORIENT_LEFT"}(Le||(Le={}));class Ge{constructor(n,i){this.ptr=n,this.inst=i}checkAlive(){if(!this.ptr)throw Error("Call after destroyed")}getPointer(){return this.checkAlive(),this.ptr}}class We{constructor(n,i){this.ptr=n,this.ptr32=n>>2,this.buf=i,this.HEAP8=new Int8Array(i),this.HEAPU32=new Uint32Array(i),this.HEAP32=new Int32Array(i)}}class Ie extends We{get type(){return this.HEAPU32[this.ptr32]}get data(){const n=this.HEAPU32[this.ptr32+4],i=this.HEAPU32[this.ptr32+5];return Int8Array.from(this.HEAP8.subarray(i,i+n))}get points(){const n=this.HEAPU32[this.ptr32+7],i=this.HEAPU32[this.ptr32+8]>>2,e=[];for(let r=0;r<n;++r){const s=this.HEAP32[i+2*r],a=this.HEAP32[i+2*r+1];e.push({x:s,y:a})}return e}get orientation(){return this.HEAP32[this.ptr32+9]}get next(){const n=this.HEAPU32[this.ptr32+11];return n?new Ie(n,this.buf):null}get time(){return this.HEAPU32[this.ptr32+13]}get cacheCount(){return this.HEAP32[this.ptr32+14]}get quality(){return this.HEAP32[this.ptr32+15]}}class Zt extends We{get head(){const n=this.HEAPU32[this.ptr32+2];return n?new Ie(n,this.buf):null}}class pe{constructor(n){this.type=n.type,this.typeName=E[this.type],this.data=n.data,this.points=n.points,this.orientation=n.orientation,this.time=n.time,this.cacheCount=n.cacheCount,this.quality=n.quality}static createSymbolsFromPtr(n,i){if(n==0)return[];let e=new Zt(n,i).head;const r=[];for(;e!==null;)r.push(new pe(e)),e=e.next;return r}decode(n){return new TextDecoder(n).decode(this.data)}}class xt extends Ge{static createFromGrayBuffer(n,i,e,r=0){return W(this,void 0,void 0,function*(){const s=yield Re(),a=new Uint8Array(e),o=n*i;if(o!==a.byteLength)throw Error(`data length (${a.byteLength} bytes) does not match width and height (${o} bytes)`);const d=s._malloc(o);return s.HEAPU8.set(a,d),new this(s._Image_create(n,i,808466521,d,o,r),s)})}static createFromRGBABuffer(n,i,e,r=0){return W(this,void 0,void 0,function*(){const s=yield Re(),a=new Uint8Array(e),o=n*i;if(4*o!==a.byteLength)throw Error(`data length (${a.byteLength} bytes) does not match width and height (${4*o} bytes)`);const d=s._malloc(o),l=d+o,h=s.HEAPU8;for(let u=d,c=0;u<l;u++,c+=4)h[u]=19595*a[c]+38469*a[c+1]+7472*a[c+2]>>16;return new this(s._Image_create(n,i,808466521,d,o,r),s)})}destroy(){this.checkAlive(),this.inst._Image_destory(this.ptr),this.ptr=0}getSymbols(){this.checkAlive();const n=this.inst._Image_get_symbols(this.ptr);return pe.createSymbolsFromPtr(n,this.inst.HEAPU8.buffer)}}class Pt extends Ge{static create(){return W(this,void 0,void 0,function*(){const n=yield Re();return new this(n._ImageScanner_create(),n)})}destroy(){this.checkAlive(),this.inst._ImageScanner_destory(this.ptr),this.ptr=0}setConfig(n,i,e){return this.checkAlive(),this.inst._ImageScanner_set_config(this.ptr,n,i,e)}enableCache(n=!0){this.checkAlive(),this.inst._ImageScanner_enable_cache(this.ptr,n)}recycleImage(n){this.checkAlive(),this.inst._ImageScanner_recycle_image(this.ptr,n.getPointer())}getResults(){this.checkAlive();const n=this.inst._ImageScanner_get_results(this.ptr);return pe.createSymbolsFromPtr(n,this.inst.HEAPU8.buffer)}scan(n){return this.checkAlive(),this.inst._ImageScanner_scan(this.ptr,n.getPointer())}}const Ye=()=>W(void 0,void 0,void 0,function*(){const t=yield Pt.create();return t.setConfig(E.ZBAR_NONE,ne.ZBAR_CFG_BINARY,1),t});let ke;const jt=(t,n)=>W(void 0,void 0,void 0,function*(){n===void 0&&(n=ke||(yield Ye()),ke=n);const i=n.scan(t);if(i<0)throw Error("Scan Failed");return i===0?[]:t.getSymbols()}),Lt=(t,n,i,e)=>W(void 0,void 0,void 0,function*(){const r=yield xt.createFromRGBABuffer(n,i,t),s=yield jt(r,e);return r.destroy(),s}),kt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));/*!
 * @preflower/barcode-detector-polyfill v0.9.21
 * A WebAssembly polyfill for the Barcode Detection API
 * Built 2024-11-29T04:04:31.263Z
 * (c) 2021-present Ferdinand Kasper <fkasper@modus-operandi.at>
 * Released under the MIT license.
 * 
 * This work uses https://github.com/undecaf/zbar-wasm.git as per
 * LGPL-2.1 section 6 (https://opensource.org/licenses/LGPL-2.1).
 */function Ut(t,n,i,e){return new(i||(i=Promise))(function(r,s){function a(l){try{d(e.next(l))}catch(h){s(h)}}function o(l){try{d(e.throw(l))}catch(h){s(h)}}function d(l){var h;l.done?r(l.value):(h=l.value,h instanceof i?h:new i(function(u){u(h)})).then(a,o)}d((e=e.apply(t,[])).next())})}class b{constructor(n,i=ne.ZBAR_CFG_ENABLE,e=1){this.symbolType=n,this.configType=i,this.number=e,this.configSteps=[this]}static register(n,i,e=i.symbolType){return b.formatsToConfigs[n]=i,b.typesToFormats[e]=b.typesToFormats[e]||n,i}static formats(){return Object.keys(b.formatsToConfigs)}static toFormat(n){return b.typesToFormats[n]}static configure(n,i){var e;(e=b.formatsToConfigs[i])===null||e===void 0||e.configSteps.forEach(r=>n.setConfig(r.symbolType,r.configType,r.number))}add(n){return this.configSteps.push(n),this}}var Ue;b.formatsToConfigs={},b.typesToFormats={},b.register("codabar",new b(E.ZBAR_CODABAR)),b.register("code_39",new b(E.ZBAR_CODE39)),b.register("code_93",new b(E.ZBAR_CODE93)),b.register("code_128",new b(E.ZBAR_CODE128)),b.register("databar",new b(E.ZBAR_DATABAR)),b.register("databar_exp",new b(E.ZBAR_DATABAR_EXP)),b.register("ean_2",new b(E.ZBAR_EAN2)),b.register("ean_5",new b(E.ZBAR_EAN5)),b.register("ean_8",new b(E.ZBAR_EAN8)),b.register("ean_13",new b(E.ZBAR_EAN13)),b.register("ean_13+2",new b(E.ZBAR_EAN13)).add(new b(E.ZBAR_EAN2)),b.register("ean_13+5",new b(E.ZBAR_EAN13)).add(new b(E.ZBAR_EAN5)),b.register("isbn_10",new b(E.ZBAR_ISBN10)).add(new b(E.ZBAR_EAN13)),b.register("isbn_13",new b(E.ZBAR_ISBN13)).add(new b(E.ZBAR_EAN13)),b.register("isbn_13+2",new b(E.ZBAR_ISBN13)).add(new b(E.ZBAR_EAN13)).add(new b(E.ZBAR_EAN2)),b.register("isbn_13+5",new b(E.ZBAR_ISBN13)).add(new b(E.ZBAR_EAN13)).add(new b(E.ZBAR_EAN5)),b.register("itf",new b(E.ZBAR_I25)),b.register("qr_code",new b(E.ZBAR_QRCODE)),b.register("sq_code",new b(E.ZBAR_SQCODE)),b.register("upc_a",new b(E.ZBAR_UPCA)).add(new b(E.ZBAR_EAN13)),b.register("upc_e",new b(E.ZBAR_UPCE)).add(new b(E.ZBAR_EAN13)),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.UPRIGHT=0]="UPRIGHT",t[t.ROTATED_RIGHT=1]="ROTATED_RIGHT",t[t.UPSIDE_DOWN=2]="UPSIDE_DOWN",t[t.ROTATED_LEFT=3]="ROTATED_LEFT"}(Ue||(Ue={}));class Ht{}const $t=(()=>{try{return new OffscreenCanvas(1,1).getContext("2d")instanceof OffscreenCanvasRenderingContext2D}catch{return!1}})();class ee{constructor(n={}){if(n.formats!==void 0){if(!Array.isArray(n.formats)||!n.formats.length)throw new TypeError(`Barcode formats should be a non-empty array of strings but are: ${JSON.stringify(n)}`);const i=n.formats.filter(e=>!b.formats().includes(e));if(i.length)throw new TypeError(`Unsupported barcode format(s): ${i.join(", ")}`)}this.formats=n.formats||b.formats(),this.zbarConfig=n.zbar||new Ht}static getSupportedFormats(){return Promise.resolve(b.formats())}detect(n){if(!ee.isImageBitmapSource(n))throw new TypeError("BarcodeDetector.detect() argument is not an ImageBitmapSource");const i=ee.intrinsicDimensions(n);if(i.width===0||i.height===0)return Promise.resolve([]);try{return Promise.all([this.toImageData(n),this.getScanner()]).then(e=>{const r=e[0],s=e[1];return this.zbarConfig.enableCache!==void 0&&s.enableCache(this.zbarConfig.enableCache),Lt(r.data,r.width,r.height,s)}).then(e=>e.map(r=>this.toBarcodeDetectorResult(r)))}catch(e){return Promise.reject(e)}}getScanner(){return new Promise((n,i)=>Ut(this,void 0,void 0,function*(){if(!this.scanner){const e=yield Ye();this.formats.length>0&&(e.setConfig(E.ZBAR_NONE,ne.ZBAR_CFG_ENABLE,0),this.formats.forEach(r=>b.configure(e,r))),this.scanner=e}n(this.scanner)}))}toImageData(n){const i=e=>{const r=ee.intrinsicDimensions(e);this.canvas&&this.canvas.width===r.width&&this.canvas.height===r.height||(this.canvas=function(o,d){if($t)return new OffscreenCanvas(o,d);{const l=document.createElement("canvas");return l.width=o,l.height=d,l}}(r.width,r.height));const s=this.canvas,a=s.getContext("2d");return a.drawImage(e,0,0),a.getImageData(0,0,s.width,s.height)};if(n instanceof ImageData)return Promise.resolve(n);if(n instanceof Blob){const e=document.createElement("img");return e.src=URL.createObjectURL(n),e.decode().then(()=>i(e)).finally(()=>URL.revokeObjectURL(e.src))}return n instanceof CanvasRenderingContext2D?Promise.resolve(n.getImageData(0,0,n.canvas.width,n.canvas.height)):Promise.resolve(i(n))}toBarcodeDetectorResult(n){const i={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0};return n.points.forEach(e=>{i.minX=Math.min(i.minX,e.x),i.maxX=Math.max(i.maxX,e.x),i.minY=Math.min(i.minY,e.y),i.maxY=Math.max(i.maxY,e.y)}),{format:b.toFormat(n.type),rawValue:n.decode(this.zbarConfig.encoding),orientation:n.orientation,quality:n.quality,boundingBox:DOMRectReadOnly.fromRect({x:i.minX,y:i.minY,width:i.maxX-i.minX,height:i.maxY-i.minY}),cornerPoints:[{x:i.minX,y:i.minY},{x:i.maxX,y:i.minY},{x:i.maxX,y:i.maxY},{x:i.minX,y:i.maxY}]}}static isImageBitmapSource(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof CanvasRenderingContext2D<"u"&&n instanceof CanvasRenderingContext2D||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||n instanceof ImageData||n instanceof Blob||n&&n.width==0||n&&n.height==0}static intrinsicDimensions(n){return{width:Number(n.naturalWidth||n.videoWidth||n.width),height:Number(n.naturalHeight||n.videoHeight||n.height)}}}if(typeof window<"u")try{window.BarcodeDetector.getSupportedFormats()}catch{window.BarcodeDetector=ee}function Gt(){const t=Mt(),[n,i]=B.useState(!1),e=r=>(r=r.replace(/[^0-9]/g,""),[r.substring(0,3),r.substring(3,5),r.substring(5,9),r.substring(9,12),r.substring(12,13)].filter(a=>a.length>0).join("-"));return M.jsxs("div",{className:"add-book px-2 py-4",children:[M.jsx("h1",{className:"text-lg font-semibold mb-2",children:"새 책 등록"}),M.jsx("div",{className:"flex flex-col items-center mt-4 px-4 gap-y-2",children:n&&M.jsxs(M.Fragment,{children:[M.jsx(Dt,{id:"add-book-barcode-scanner",className:"mt-2",onCapture:r=>{r.length>0&&r[0].rawValue.length===13&&t.setFieldValue("isbn",e(r[0].rawValue))},options:{formats:["ean_13"]}}),M.jsx("button",{className:"btn btn-secondary",onClick:()=>{i(!1)},type:"button",children:"닫기"})]})}),M.jsx("form",{className:"mt-4",onSubmit:r=>{r.preventDefault(),t.handleSubmit().then()},children:M.jsxs("fieldset",{className:"fieldset bg-base-200 border-base-300 rounded-box w-xs border p-4",children:[M.jsx("legend",{className:"fieldset-legend",children:"책 정보"}),M.jsx(t.AppField,{name:"isbn",children:r=>M.jsxs(M.Fragment,{children:[M.jsx("label",{className:"label mt-2",children:"ISBN"}),M.jsxs("div",{className:"join",children:[M.jsx("input",{id:"book-isbn",className:"input",name:r.name,onChange:s=>r.handleChange(s.target.value),placeholder:"",type:"text",value:r.state.value}),M.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>i(!0),children:"스"})]})]})}),M.jsx(t.AppField,{name:"title",children:r=>M.jsx(r.LabelInput,{id:"book-title",className:"input",label:"제목",name:r.name,onChange:s=>r.handleChange(s.target.value),placeholder:"책 제목은 필수 입력합니다",required:!0,type:"text",value:r.state.value})}),M.jsx(t.AppField,{name:"author",children:r=>M.jsx(r.LabelInput,{id:"book-author",className:"input",label:"저자",name:r.name,type:"text"})}),M.jsx(t.AppField,{name:"pressName",children:r=>M.jsx(r.LabelInput,{id:"book-pressName",className:"input",label:"출판사",name:r.name,type:"text"})}),M.jsx(t.AppField,{name:"releaseDate",children:r=>M.jsx(r.LabelInput,{id:"book-releaseDate",className:"input",label:"출간일",name:r.name,type:"date"})}),M.jsx(t.AppField,{name:"price",children:r=>M.jsx(r.LabelInput,{id:"book-price",className:"input",label:"정가",name:r.name,type:"text"})}),M.jsx(t.AppField,{name:"own",children:r=>M.jsx(r.LabelInput,{id:"book-own",className:"input",label:"소유 상태",name:r.name,type:"text"})}),M.jsx(t.AppField,{name:"read",children:r=>M.jsx(r.LabelInput,{id:"book-read",className:"input",label:"독서 상태",name:r.name,type:"text"})}),M.jsx(t.AppForm,{children:M.jsx(t.FormSubmit,{})})]})})]})}const Xt=function(){return M.jsx(Gt,{})};export{Xt as component};
